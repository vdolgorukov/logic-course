---
title: Аксиоматическое построение классической логики высказываний
category: Jekyll
layout: post
---

Мы рассмотрим несколько вариантов гильбертовских (аксиоматических) исчислений для классической логики высказываний:
- $cl$ - исчисление для языка с традиционным набором связок[^1]
- $cl_{\to\neg}$ - исчисление для ипликативно-негативного фрагмента 
- $cl_+$ - исчисление для позитивного фрагмента (все традиционные связки кроме отрицания)
- $cl_\to$ - исчисление для импликативного фрагмента. 
А также несколько «‎экзотических»‎ исчислений, состоящих из единственной аксиомной схемы.

[^1]:  Традиционно рассматривают следующий набор связок: $\wedge, \vee, \to, \neg$. Данный набор не является ни минимальным (например, можно оставить только $\wedge$ и $\neg$), ни максимальным (можно добавить $\mid$, $\downarrow$, $\veebar$, $\leftrightarrow$). Удобно поступить следующим образом: ввести новые связки как синтаксическое сокращение. Например, $\varphi \leftrightarrow \psi := (\varphi \to \psi) \wedge (\psi \to \varphi)$.

## Пропозициональные языки 

*Обозначение*. Пусть $Prop = \\{p_1, p_2, p_3, \dots \\}$ обозначает счетное множество пропозициональных переменных. Для удобства мы будем писать $p$ вместо $p_1$, $q$ вместо $p_2$, $r$ вместо $p_3$ и т.д.

### Множество всех формул $Fm$ в традиционном наборе связок, описание синтаксиса в форме Бэкуса—Наура (БНФ)

*Определение*. Язык $Fm$ Пусть $p \in Prop$, тогда язык $Fm$ определяется следующей грамматикой: 

$$\varphi::= p \mid \neg \varphi \mid (\varphi \to \varphi) \mid (\varphi \wedge \varphi) \mid (\varphi \vee \varphi)$$

Мы будем называть язык $Fm$ множеством правильно построенных (пропозициональных) формул или просто множеством (пропозициональных) формул.

Такой способ описания синтаксиса называется БНФ ([форма Бэкуса — Наура](https://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0_%D0%91%D1%8D%D0%BA%D1%83%D1%81%D0%B0_%E2%80%94_%D0%9D%D0%B0%D1%83%D1%80%D0%B0)). 

Как следует читать такие определения? Такая запись означает, что формула $\varphi$ порождается («::=»‎) серией правил, которые отделены друг от друга разделителем («|»‎). Если убрать разделитель, то БНФ можно переписать как следующую серию правил (что конечно менее лаконично):
- $\varphi::= p$ 
- $\varphi::= \neg \varphi$
- $\varphi::= (\varphi \to \varphi)$
- $\varphi::= (\varphi \wedge \varphi)$
- $\varphi::= (\varphi \vee \varphi) $	


*Пример*. Докажем, что $p \to (q \to r), p \to q \vdash_{\!cl_{\!\to\neg}} p \to r$. 
Рассмотрим следуюущую последовательность: 
1. $p \to (q \to r)$ – гипотеза
2. $p \to q$ – гипотеза
3. $(p \to (q \to r)) \to ((p \to q) \to (p \to r))$ – аксиома $I_2$
4. $(p \to q) \to (p \to r)$ – MP 1,3 
5. $p \to r$ – MP 2, 4

<!---
Мы рассмотрим несколько вариантов гильбертовских (аксиоматических) исчислений для классической логики высказываний: $cl$ $\textendash$ исчисление для языка с традиционным набором связок[^просвязки], $cl_{\to\neg}$ $\textendash$ исчисление для ипликативно-негативного фрагмента, $cl_+$ $\textendash$ исчисление для позитивного фрагмента (все традиционные связки кроме отрицания), $cl_\to$ $\textendash$ исчисление для импликативного фрагмента. А также несколько «экзотических» исчислений, состоящих из единственной аксиомной схемы.
-->

 [^просвязки]: Традиционно рассматривают следующий набор связок: $\wedge, \vee, \to, \neg$. Данный набор не является ни минимальным (например, можно оставить только $\wedge$ и $\neg$), ни максимальным (можно добавить $\mid$, $\downarrow$, $\veebar$, $\leftrightarrow$). Удобно поступить следующим образом: ввести новые связки как синтаксическое сокращение. Например, $\varphi \leftrightarrow \psi := (\varphi \to \psi) \wedge (\psi \to \varphi)$.
 
## Пропозициональные языки

**Обозначение.** Пусть $Var = \{p_1, p_2, p_3, \dots \}$ обозначает счетное множество пропозициональных переменных. Для удобства мы будем писать $p$ вместо $p_1$, $q$ вместо $p_2$, $r$ вместо $p_3$ и т.д. 

### Множество всех формул $Fm$ в традиционном наборе связок, описание синтаксиса в форме Бэкуса — Наура (БНФ)

**Определение.** Пусть $p \in Var$, тогда язык $Fm$ определяется следующей грамматикой: 

$$\varphi::= p \mid \neg \varphi \mid (\varphi \to \varphi) \mid (\varphi \wedge \varphi) \mid (\varphi \vee \varphi) $$

Мы будем называть язык $Fm$ множеством правильно построенных (пропозициональных) формул или просто множеством (пропозициональных) формул.

Такой способ описания синтаксиса называется БНФ (форма Бэкуса — Наура). Как следует читать такие определения? Такая запись означает, что формула $\varphi$ порождается ($«::=»$) серией правил, которые отделены друг от друга разделителем ($«\mid »$). Если убрать разделитель, то БНФ можно переписать как следующую серию правил (что конечно менее лаконично):
* $\varphi::= p$ 
* $\varphi::= \neg \varphi$
* $\varphi::= (\varphi \to \varphi)$
* $\varphi::= (\varphi \wedge \varphi)$
* $\varphi::= (\varphi \vee \varphi) $	

Первая строчка означает, что пропозициональная переменная является формулой нашего языка. Вторая строчка означает, что если к формуле добавить отрицание, то мы тоже получим формулу. Третья строчка означает, что если мы соединим импликацией две формулы, то результат тоже будет формулой. Последние две строчки дают аналогичное утверждение про конъюнкцию и дизъюнкцию. Заметим, что здесь $\varphi \to \varphi$ означает, что мы соединяем импликацией две *возможно разные* формулы, что возможно приводит к непониманию. Поэтому иногда в БНФ записывают в другом силе, явно используя две разных переменных:

$$\varphi, \psi::= p \mid \neg \varphi \mid (\varphi \to \psi) \mid (\varphi \wedge \psi) \mid (\varphi \vee \psi) $$

или используя переменные с разными индексами: 

$$\varphi::= p \mid \neg \varphi \mid (\varphi_1 \to \varphi_2) \mid (\varphi_1 \wedge \varphi_2) \mid (\varphi_1 \vee \varphi_2)$$

Все эти варианты БНФ описывают один и тот же язык и отличаются друг от друга только стилистически. 

Итак, БНФ позволяет в краткой форме описать, что такое правильно построенная формула (п.п.ф.). Сравним БНФ с эквивалентным, но более традиционным описанием п.п.ф. ниже.


**Определение.** Определим множество правильно построенных формул (п.п.ф.):

1. любая пропозициональная переменная является п.п.ф.
2. если $\varphi$ п.п.ф., то $\neg \varphi$ также является п.п.ф.
3. если $\varphi$ и $\psi$ – п.п.ф, то $(\varphi \to \psi)$, $(\varphi \wedge \psi)$, $(\varphi \vee \psi)$ также являются п.п.ф.
4. ничто другое не является п.п.ф.[^провнешниескобки]

[^провнешниескобки]: Строго говоря, любая формула, в которой есть двухместная связка, всегда окружена скобками. Условимся опускать внешние скобки. То есть, писать $p \wedge (q \to r)$ вместо $(p \wedge (q \to r))$.

БНФ – более короткий и удобный способ описания синтаксиса, чем традиционное описание посредством индуктивного определения п.п.ф. В дальнейшем мы будем пользоваться только описанием синтаксиса в стиле БНФ.

### Позитивный фрагмент $Fm_+$

**Определение.** Пусть $p \in Var$, тогда язык $Fm_+$ определяется следующей грамматикой: 

$$\varphi::= p \mid (\varphi \to \varphi) \mid (\varphi \wedge \varphi) \mid (\varphi \vee \varphi) $$

### Импликативно-негативный фрагмент $Fm_{\to\neg}$

**Определение.** Пусть $p \in Var$, тогда язык $Fm_{\to\neg}$ определяется следующей грамматикой: 

$$\varphi::= p \mid \neg \varphi \mid (\varphi \to \varphi) $$

### Импликативный фрагмент $Fm_{\to}$

**Определение.** Пусть $p \in Var$, тогда язык $Fm_{\to}$ определяется следующей грамматикой: 

$$\varphi::= p \mid (\varphi \to \varphi) $$

**Упражнение.** Для каждого языка $L \in \{ Fm, Fm_{+}, Fm_{\to\neg}, Fm_{\to} \}$ найдите формулу $\varphi \in L$ такую, что $\varphi$ – тавтология.

**Вопрос.** Почему не рассматривается исчисление, состоящее только из формул с конъюнкцией и дизъюнкцией?

## Исчисление для импликативно-негативного фрагмента КЛВ, свойства вывода, теорема о дедукции

### Исчисление $cl_{\neg\to}$

**Определение.** Исчисление $cl_{\neg\to}$

Аксиомные схемы:

($I_1$) $A \to (B \to A)$

($I_2$) $(A \to (B \to C)) \to ((A \to B) \to (A \to C))$

($N_1$) $(A \to B) \to ((A \to \neg B) \to \neg A)$

($N_2$) $\neg \neg A \to A$

Правило вывода:
$A$, $A \to B$  $\Rightarrow$ $B$	

**Вопрос.** В чем интуитивный смысл каждой аксиомной схемы исчисления $cl_{\neg\to}$?

Что такое аксиомная схема? Аксиомная схема описывает структуру формулы, которая считается аксиомой. Для примера возьмем аксиомную схему ($I_1$). Подразумевается, что собственно аксиомами исчисления будут все формулы вида $A \to (B \to A)$. Например, такие: 

* $p \to (q \to p)$
* $(q \to r) \to ((\neg p \to r) \to (q \to r))$
* $\neg \neg \neg p \to (\neg p \to \neg \neg \neg p )$

Таким образом, в исчислении $cl_{\to\neg}$ только четыре аксиомные схемы, но самих аксиом – бесконечно много. 

**Определение.** Выводом формулы $\varphi$ из множества гипотез $\Gamma$ в исчислении $S$ будем называть конечную последовательность формул $\varphi_1, \dots, \varphi_n$ такую, что 

1. для каждой формулы $\varphi_i$ ($1 \leq i \leq n$) верно одно из трех:
    * $\varphi_i \in \Gamma$ или
    * $\varphi_i$ является аксиомой исчисления $S$ 
    * $\varphi_i$ получена из предыдущих формул по одному из правил вывода исчисления $S$[^проMP]
2. $\varphi_n = \varphi$

[^проMP]: Поскольку во всех рассматриваемых нами исчислениях используется правило вывода modus ponens, этот пункт можно переписать так: найдутся $\varphi_j$ и $\varphi_k = \varphi_j \to \varphi_i$, т.ч. $j, k < i $.

**Обозначение.** Пусть $\Gamma \vdash_S \varphi$ означает, что найдется такая последовательность формул, которая является выводом формулы $\varphi$ из множества гипотез $\Gamma$ в исчислении $S$. Будем говорить, что формула $\varphi$ выводима из множества гипотез $\Gamma$ (в исчислении $S$).

Если из контекста понятно о каком исчислении идет речь, то будем писать $\Gamma \vdash \varphi$ вместо $\Gamma \vdash_S \varphi$. 

**Обозначение.** Условимся писать $\Gamma, \varphi \vdash_S \psi$ вместо $\Gamma \cup \{ \varphi \} \vdash_S \psi $.

**Пример.** Докажем, что $p \to (q \to r), p \to q \vdash_{cl_{\to\neg}} p \to r$. Рассмотрим следующую последовательность: 

1. $p \to (q \to r)$ – гипотеза
2. $p \to q$ – гипотеза
3. $(p \to (q \to r)) \to ((p \to q) \to (p \to r))$ – аксиома $I_2$
4. $(p \to q) \to (p \to r)$ – MP 1,3 
5. $p \to r$ – MP 2, 4 

**Упражнение.** Постройте следующие выводы:

1. $p \to q, q \to r, p \vdash_{cl_{\to\neg}} \! r$
2. $p \to q, p \to \neg q \vdash_{cl_{\to\neg}} \! \neg p$

**Определение.** Теоремой исчисления $S$ будем называть формулу $\varphi$ такую, что она выводится в этом исчислении из пустого множества гипотез, то есть, $\varnothing \vdash_S \varphi$.

**Обозначение.** Условимся писать $\vdash_S \varphi$ вместо $\varnothing \vdash_S \varphi$. Или просто $\vdash \varphi$, если из контекста ясно, о каком исчислении идет речь. 

**Пример.** $\vdash_{cl_{\to\neg}}p \to p$

1. $p \to ((q \to p) \to p)$ – аксиома $I_1$
2. $(p \to ((q \to p) \to p)) \to ((p \to (q \to p)) \to (p \to p))$ – аксиома $I_2$
3. $(p \to (q \to p)) \to (p \to p))$ – MP 1,2
4. $p \to (q \to p)$ – аксиома $I_1$
5. $p \to p$ – MP 3, 4

**Пример.** Часто вывод удобно записывать не в столбик, а в виде дерева, в котором непосредственно ниже под двумя формулами записывается результат применения к ним правила modus ponens. Перепишем вывод $\vdash p \to p$ в виде дерева:

\begin{prooftree}
\infer0[$I_1$]{p \to ((q \to p) \to p)} 
\infer0[$I_2$]{(p \to ((q \to p) \to p)) \to ((p \to (q \to p)) \to (p \to p))} 
\infer2[$MP$]{(p \to (q \to p)) \to (p \to p))}
\infer0[$I_1$]{p \to (q \to p)} 
\infer2[$MP$]{p \to p}
\end{prooftree}

**Упражнение.** Запишите вывод из примера доказательства $p \to (q \to r), p \to q \vdash_{cl_{\to\neg}} p \to r$ в виде дерева. 

### Свойства вывода

**Утверждение.** Отношение выводимости из множества гипотез $\Gamma \vdash \varphi$ обладает следующими свойствами: 

1. компактность: если $\Gamma \vdash \varphi$, то найдется конечное $\Gamma' \subseteq \Gamma$ т.ч. $\Gamma' \vdash \varphi $ 
2. монотонность: если $\Gamma \vdash \varphi$ и $\Gamma \subseteq \Delta$, то $\Delta \vdash \varphi$
3. транзитивность: если для всех $\varphi \in \Delta$: $\Gamma \vdash \varphi$ и $\Delta \vdash \psi$, то $\Gamma \vdash \psi$

Используя следующее обозначение $\boxed{\Gamma \vdash \Delta:= \forall \varphi \in \Delta: \Gamma \vdash \varphi}$, можно переписать формулировку свойства транзитивности в следующем виде: $\Gamma \vdash \Delta$ и $\Delta \vdash \psi \Rightarrow \Gamma \vdash \psi$.

**Доказательство.** Упражнение.

**Вопрос.** Следствием какого свойства является следующее утверждение: если $\vdash \varphi$, то $\Gamma \vdash \varphi$?

**Упражнение.** Постройте следующие выводы:
* $p \vdash q \to p $
* $p \to (q \to r) \vdash (p \to q) \to (p \to r)$

### Теорема о дедукции

Теорема о дедукции[^метатеорема] позволяет сильно упростить процедуру поиска вывода. Можно сказать, что поиск доказательства без использования теоремы о дедукции и с теоремой о дедукции это две разные задачи, первая из которых является гораздо более сложной.

Мы докажем теорему о дедукции не только для исчисления $cl_{\to\neg}$, но и для более широкого класса исчислений. Заметим, что в доказательстве нам не понадобятся аксиомные схемы $N_1$ и $N_2$.

[^метатеорема]: Иногда говорят «метатеорема о дедукции», что различать теоремы исчисления и метаутверждения об исчислении.

**Определение.** Будем называть исчисление $S$ «дружественным к дедукции», если

1. $S$ содержит аксиомные схемы $I_1$ и $I_2$
2. единственное правило вывода в исчислении $S$ – modus ponens.

**Утверждение.** Пусть $S$ – «дружественное к дедукции» исчисление. Если $\Gamma \vdash_S \varphi \to \psi$, $\Gamma \vdash_S \varphi \to (\psi \to \chi)$, то $\Gamma \vdash_S \varphi \to \chi$.

**Доказательство.** Упражнение.

**Теорема.** О дедукции

Пусть $L$ – пропозициональный язык, в котором есть импликация, $S$ – дружественное к дедукции исчисление в языке $L$, $\Gamma \subseteq L$, $\varphi, \psi \in L$, тогда

$$\Gamma, \varphi \vdash_S \psi \iff \Gamma \vdash_S \varphi \to \psi$$

**Доказательство.**

($\Leftarrow$) Упражнение. 

($\Rightarrow$) Будем доказывать это утверждение возвратной индукцией по длине вывода (см.: замечание о принципе возвратной индукции). Нам дано, что $\Gamma, \varphi \vdash_S \psi$. Значит, найдется последовательность формул $\psi_1, \dots, \psi_n$ (где $\psi_n = \psi$), которая является выводом формулы $\psi$ из множества гипотез $\Gamma \cup \{\varphi\}$. Допишем слева к каждой из формул в этой последовательности формулу $\varphi$ и импликацию. 

| 1. | $\psi_1$ | 1. |$\varphi \to \psi_1$ |
|:-------------:|:---------------:|:---------------:|:---------------:|
| 2. | $\psi_2$ | 2. | $\varphi \to \psi_2$ |
| ... | ... | ...| ... |
| n-1. | $\psi_{n-1}$ | n-1. | $\varphi \to \psi_{n-1}$ |
| n. | $\psi_n$ | n. | $\varphi \to \psi_n$ ($\psi_n=\psi$ |

Заметим, что мы еще не получили новый вывод, а только заготовку для него. Теперь докажем, что можно достроить нашу заготовку до полноценного вывода По определению вывода из гипотез для каждой формулы $\psi_i$ ($1 \leq i \leq n$) должно выполнятся одно из следующих условий: 

сл. 1. $\psi_i \in \Gamma \cup \{\varphi\}$, 

сл. 2. $\psi_i$ – аксиома,

сл. 3. $\psi_i$ – получена из предыдущих формул по modus ponens

Для каждого случая укажем какие строчки нужно добавить, чтобы получить вывод $\Gamma \vdash_S \varphi \to \psi_i$. 

1. $\psi_i \in \Gamma \cup \{\varphi\}$. Рассмотрим два подслучая сл. 1a: $\psi_i \in \Gamma$ и сл. 1b: $\psi_i \in \{ \varphi \} $, то есть, $\psi_i = \varphi$.
	
	1a. Продолжим вывод следующим образом:
	* $\psi_i$ – гипотеза 
	* $\psi_i \to (\varphi \to \psi_i )$ – аксиома $I_1$
	* $\varphi \to \psi_i$ – $MP$

	1b. $\psi_i = \varphi$. Получается, что нам нужно доказать, что $\Gamma \vdash_S \varphi \to \varphi$. Заметим, что $\varphi \to \varphi$ теорема любого 	 дружественного к дедукции исчисления, поскольку для ее доказательства нужны только аксиомы $I_1$, $I_2$ и modus ponens (см. пример доказательства 			$\vdash_{cl_{\to\neg}}p \to p$).

2. $\psi_i$ – аксиома. Аналогично сл.~1a.
3. $\psi_i$ получена из предыдущих по правилу вывода modus ponens, то есть, найдутся формулы $\psi_j$ и $\psi_k = \psi_j \to \psi_i$ ($j, k < i$). По предположению индукции верно, что $\Gamma \vdash_S \varphi \to \psi_j$ и $\Gamma \vdash_S \varphi \to (\psi_j \to \psi_i)$. Тогда, по утверждению о «дружественном к дедукции» исчислении, верно, что $\Gamma \vdash_S \varphi \to \psi_i$. 

Заметим, что в каждом из случаем мы использовали только гипотезы из $\Gamma$ и не использовали $\varphi$.
Таким образом, мы получили вывод $\Gamma \vdash_S \varphi \to \psi$. 

**Пример.** Посмотрим как работает теорема о дедукции на конкретном примере.

Докажем, что вывод $p, p \to q \vdash q$ 

1. $p$ – гипотеза
2. $p \to q$ – гипотеза
3. $q$ – $MP$ 1,2

можно преобразовать в вывод $p \vdash ( p \to q) \to q$.

Допишем к каждой строчке слева формулу $p \to q$. Получим заготовку для вывода: 
 
1. $(p \to q)$ $\to p$ 
2. $(p \to q) \to (p \to q)$
3. $(p \to q) \to q$ 

| $\Gamma, \varphi \vdash \psi$ | $\Gamma \vdash \varphi \to \psi$ \ |
|----------|----------|
| $p, p \to q \vdash q$ | $p \vdash ( p \to q) \to q$ |
|  | 1. $p$ - гип. |
|  | 2. $p \to ((p \to q) \to p)$ – акс. $I_1$ |
| 1. $p$ - гип. | 3. $(p \to q) \to p$ – $MP$ 1,2 |
|  | 4. $(p \to q) \to ((q \to (p \to q)) \to (p \to q))$ – акс. $I_1$ |
|  | 5. $((p \to q) \to ((q \to (p \to q)) \to (p \to q))) \to$ |
|  | $(((p \to q) \to (q \to (p \to q))) \to ((p \to q) \to (p \to q)))$ – акс. $I_2$  |
|  | 6. $((p \to q) \to (q \to (p \to q))) \to ((p \to q) \to (p \to q)))$ – $MP$ 4,5 | 
|  | 7. $(p \to q) \to (q \to (p \to q))$ – акс. $I_1$ |
| 2. $p \to q$ - гип. | 8. $(p \to q) \to (p \to q)$ – $MP$ 6,7 |
|  | 9. $((p \to q) \to (p \to q)) \to ( (p \to q) \to p ) \to ((p \to q) \to q))$ – акс. $I_2$ |
|  | 10. $( (p \to q) \to p ) \to ((p \to q) \to q)$ – $MP$ 4,5 |
| 3. q - MP 1,2 | 11. $(p \to q) \to q)$ – $MP$ 2,6 

Заметим, что здесь шаги 4-8 являются доказательством теоремы $(p \to q) \to (p \to q)$. Доказательство получается из доказательства $p \to p$ (см. пример доказательства $\vdash_{cl_{\to\neg}}p \to p$) путем замены $p$ на $p \to q$.

**Замечание.** Принцип возвратной дедукции

В доказательстве теоремы о дедукции мы опирались на принцип возвратной индукции (strong induction): 

$$\underbrace{\forall n  (\overbrace{\forall k < n\: Pk}^{\text{предпол. инд.}} \Rightarrow Pn)}_{\text{шаг индукции}} \Rightarrow \forall n P n$$

То есть, если для произвольного натурального $n$ удасться доказать, что выполнение условия для всех предыдущих чисел, влечет выполнение условия и для данного числа, то условие верно для всех натуральных чисел. 

Свойство $Pn$ является свойством некоторого натурального числа. Но в формулировке теоремы о дедукции натуральные числа не упоминаются. Как быть? Можно определить следующее свойство натурального числа:

$Pn:=$ «вывод формулы $\psi$ из $\Gamma \cup \{ \varphi \}$ *длины n* можно преобразовать в вывод формулы $\varphi \to \psi$ из $\Gamma$».

Таким образом, мы хотим доказать, что для произвольного вывода длины $n$ работает теорема о дедукции ($Pn$), исходя из предположения, что она работает для всех выводов меньшей длины ($\forall k < n\: Pk$).

**Вопрос\*.** Чем принцип возвратной индукции отличается от принципа математической индукции?

**Упражнение.** Докажите следующее утверждение: если $\Gamma, \varphi \vdash \psi$ и $\Gamma \vdash \varphi$, то $\Gamma \vdash \psi$.

**Упражнение.** Докажите следующее утверждение: если $\vdash \varphi$ и $\Gamma \not \vdash \psi$, то $\Gamma, \varphi \not \vdash \psi$.

**Упражнение.** Докажите следующее утверждение. Пусть $S$ – дружественное к дедукции исчисление, $L$ – язык этого исчисления, $\Gamma \subseteq L$, $\varphi_1, \dots, \varphi_{n-1}, \varphi_n, \psi \in L$ тогда 

$$\Gamma, \varphi_1, \dots, \varphi_{n-1}, \varphi_{n} \vdash_S \psi \iff \Gamma \vdash_S \varphi_1 \to ( \dots (\varphi_{n-1} \to (\varphi_{n} \to \psi)) \dots )$$

**Упражнение.** Докажите следующие теоремы исчисления $cl_{\neg\to}$:

1. $((p \to q) \to r) \to  (q \to r)$
2. $(q \to r) \to ((p \to q) \to (p \to r))$
3. $(p \to (q \to r)) \to (q \to (p \to r))$
4. $(p \to q) \to ((q \to r) \to (p \to r))$
5. $p \to ((p \to q) \to q)$
6. $(p \to (p \to q)) \to (p \to q)$	

Если прямо не оговорено обратное, то разрешается пользоваться метатеоремой о дедукции.

**Упражнение\*.** Докажите теоремы из предыдущего упражнения без использования метатеоремы о дедукции.


**Определение.** Правило вывода
$\frac{A_1, \dots, A_n}{B}$
является производным в исчислении $S$, если $A_1, \dots, A_n \vdash_S B$


**Упражнение.** Докажите, что в исчислении $cl_{\neg\to}$ следующие правила вывода являются производными:

* $\frac{A}{B \to A}$


* $\frac{A \to (B \to C)}{(A \to B)  \to (A \to  C)}$


* $\frac{(A \to B) \to C)}{B \to C}$


* $\frac{A \to (B \to C)}{B \to (A \to C)}$	


* $\frac{A \to B }{(C \to A) \to  (C \to B)}$


* $\frac{A \to B}{B \to C}{A \to C}$	


**Упражнение.** Докажите следующие теоремы исчисления $cl_{\neg\to}$:

1. $p \to (\neg p \to \neg q)$
2. $(p \to \neg p) \to \neg p$
3. $p \to \neg \neg p$

**Упражнение.** Докажите следующие теоремы исчисления $cl_{\neg\to}$:
	
1. $(p \to \neg q) \to (q \to \neg p)$	
2. $(p \to q) \to (\neg q \to \neg p)$	
3. $(\neg p \to \neg q) \to (q \to p)$
4. $(\neg p \to q) \to (\neg q \to p)$

**Упражнение.** Докажите следующие теоремы исчисления $cl_{\neg\to}$:

1. $\neg (p \to q) \to p$
2. $\neg (p \to q) \to \neg q$
3. $p \to (\neg q \to \neg (p \to q))$	

**Упражнение.** Докажите теорему исчисления $cl_{\neg\to}$[^подсказка]:

1. $((p \to q) \to p) \to p$

[^подсказка]: Используйте предыдущее упражнение.

**Упражнение.** Докажите теорему исчисления $cl_{\neg\to}$:

1. $(q \to p) \to ((\neg q \to p) \to p)$

### Другие варианты исчислений для импликативно-негативного фрагмента

**Определение.** Дедуктивная эквивалентность

Будем называть исчисления $X$ и $Y$ дедуктивно эквивалентными, если множества их теорем совпадают.

**Упражнение\*\*.** Докажите, что если в исчислении $cl_{\neg\to}$ аксиому $N1$ заменить на

$$(A \to \neg B) \to (B \to \neg A)$$	

то получится дедуктивно-эквивалентное исчисление. 

**Упражнение\*\*.** Докажите, что если в исчислении $cl_{\neg\to}$ аксиомы $N1$ и $N_2$ заменить на 

$$(\neg A \to B) \to ((\neg A \to \neg B) \to A)$$		

то получится дедуктивно-эквивалентное исчисление. 

**Упражнение\*\*.** Докажите, что если в исчислении $cl_{\neg\to}$ аксиомы $N1$ и $N_2$ заменить на 

$$(\neg A \to \neg B) \to (B \to A)$$	

то получится дедуктивно-эквивалентное исчисление. 

## Исчисление для фрагмента с традиционным набором связок

### Исчисление $cl$

**Определение.** Исчисление $cl$

Аксиомные схемы:

($I_1$) $A \to (B \to A)$

($I_2$) $(A \to (B \to C)) \to ((A \to B) \to (A \to C))$

($C_1$) $(A \wedge B) \to A$

($C_2$) $(A \wedge B) \to B$

($C_3$) $A \to (B \to (A \wedge B))$

($D_1$) $A \to (A \vee B)$

($D_2$) $A \to (B \vee A)$

($D_3$) $(A \to C) \to ((B \to C) \to ((A \vee B) \to C))$

($N_1$) $(A \to B) \to ((A \to \neg B) \to \neg A)$

($N_2$) $\neg \neg A \to A$

Правило вывода: modus ponens

**Вопрос\*.** В чем интуитивный смысл каждой аксиомы исчисления $cl$?

**Вопрос.** Справедлива ли для исчисления $cl$ теорема о дедукции?

**Упражнение.** Докажите следующие теоремы исчисления $cl$:

1. $(p \wedge q) \to (q \wedge p)$
2. $(p \vee q) \to (q \vee p)$
3. $(p \wedge (q \wedge r)) \to ((p \wedge q) \wedge r)$
4. $(p \vee (q \vee r)) \to ((p \vee q) \vee r)$
5. $((p \wedge q) \to r) \to (p \to (q \to r))$

**Упражнение.** Докажите следующие теоремы исчисления $cl$:

1. $(p \to q) \to (\neg p \vee q)$
2. $\neg (p \vee q) \to (\neg p \wedge \neg q)$

**Упражнение.** Докажите, что 

$$\Gamma, A_1, \dots, A_n \vdash B \iff \Gamma, A_1 \wedge \dots \wedge A_n \vdash B$$

**Упражнение.** Докажите, что верны следующие утверждения:

* <font size = 5> $\frac{\Gamma \vdash A \hspace{2ex} \Gamma \vdash B}{\Gamma \vdash A \wedge B}$



-  <font size = 5> $\frac{\Gamma, A \vdash B \hspace{2ex} \Gamma, A \vdash \neg B}{\Gamma \vdash \neg A}$



* <font size = 5> $\frac{\Gamma, A \vdash C \hspace{2ex} \Gamma, B \vdash C}{\Gamma, A \vee B \vdash C}$



- $\frac{\Gamma, A \vdash B \hspace{2ex} \Gamma, \neg A \vdash B}{\Gamma \vdash B}$


### Теорема об эквивалентной замене

Мотивация: допустим мы доказали теорему $\neg (\neg p \vee \neg q) \to (\neg \neg p \wedge \neg \neg q)$, а нам хочется доказать похожую теорему без двойного отрицания $\neg (\neg p \vee \neg q) \to (p \wedge q)$. Мы можем доказать, что $p \leftrightarrow \neg \neg p$. Можем ли мы заменить $p$ на $\neg \neg p$ внутри другой формулы? 

**Обозначение.** Условимся писать $\Gamma \vdash \varphi \leftrightarrow \psi$, если $\Gamma \vdash \varphi \to \psi$ и $\Gamma \vdash \psi \to \varphi$. 

**Вопрос.** Мы вводим $\leftrightarrow$ как синтаксическое сокращение. Но $\leftrightarrow$ можно рассматривать и как связку наряду с другими. Какие аксиомы и правила вывода про $\leftrightarrow$ следовало бы добавить к исчислению $cl$?

Нам понадобятся понятия подформулы и подмодели. Подформулой будем называть часть формулы, которая сама является формулой. Дадим более строгое определение. 

**Определение.** Пусть $Sub(\varphi)$ обозначает множество подформул формулы $\varphi$. Определим $Sub(\varphi)$ индуктивно:

* $Sub(p): = \{p\}$
* $Sub(\neg \varphi) := Sub(\varphi) \cup \{ \neg \varphi \}$
* $Sub(\varphi \wedge \psi) := Sub(\varphi) \cup Sub(\psi) \cup \{\varphi \wedge \psi \}$
* $Sub(\varphi \vee \psi) := Sub(\varphi) \cup Sub(\psi) \cup \{\varphi \vee \psi \}$
* $Sub(\varphi \to \psi) := Sub(\varphi) \cup Sub(\psi) \cup \{\varphi \to \psi \}$

**Пример.** $Sub(p \wedge \neg (q \vee r))= \{ p \wedge \neg (q \vee r), p, \neg (q \vee r), q \vee r, q, r \}$

**Определение.** Пусть $\varphi, \psi \in Fm$, $p \in Var$. Через $\varphi[\psi / p]$ будем обозначать результат замены $p$ на $\psi$ в формуле $\varphi$[^другиеобозначения]. Дадим индуктивное определение подстановки:
* $p[\psi / p] := \psi$
* $q [\psi / p] := q$, если $q \not = p$
* $(\neg \varphi_1) [\psi / p] := \neg (\varphi_1 [\psi / p])$
* $(\varphi_1 \wedge \varphi_2)[\psi / p]:= (\varphi_1[\psi / p] \wedge \varphi_2[\psi / p])$
* $(\varphi_1 \vee \varphi_2)[\psi / p]:= (\varphi_1[\psi / p] \vee \varphi_2[\psi / p])$
* $(\varphi_1 \vee \varphi_2)[\psi / p]:= (\varphi_1[\psi / p] \to \varphi_2[\psi / p])$

[^другиеобозначения]: В литературе встречаются другие варианты обозначений: $ \varphi[p \mapsto \psi ]$, $ \varphi[p /\psi ]$ и пр.

**Пример.** Пусть $\varphi:= p \wedge (q \to (p \vee r))$, тогда
* $\varphi[s/p]= s \wedge (q \to (s \vee r))$
* $\varphi[s \to t / p]= (s \to t) \wedge (q \to ((s \to t) \vee r))$

**Утверждение.** Пусть $\varphi, \psi, \varphi', \psi' \in Fm$, тогда 

1. Если $\vdash \varphi \leftrightarrow \psi$, то $\vdash \neg \varphi \leftrightarrow \neg \psi$
2. Если $\vdash \varphi \leftrightarrow \varphi'$ и $\vdash \psi \leftrightarrow \psi'$, то

	2a. $\vdash (\varphi \wedge \psi) \leftrightarrow (\varphi' \wedge \psi')$
	
	2b. $\vdash (\varphi \vee \psi) \leftrightarrow (\varphi' \vee \psi')$
	
	2c. $\vdash (\varphi \to \psi) \leftrightarrow (\varphi' \to \psi')$

**Доказательство.** Упражнение.

**Теорема.** Об эквивалентной замене.

Пусть $\varphi, \psi, \psi' \in Fm$, $p \in Var$, тогда

$$\frac{\vdash \psi \leftrightarrow \psi'}{\vdash \varphi[\psi/p] \leftrightarrow \varphi[\psi'/p]}$$	


**Доказательство.** Допустим $\vdash \psi \leftrightarrow \psi'$. Докажем индукцией по построению $\varphi$, что $\vdash \varphi[\psi/p] \leftrightarrow \varphi[\psi'/p]$.

Нам нужно рассмотреть следующие случаи $\varphi = q$[^обозначение], $\varphi = \neg \varphi_1$, $\varphi = \varphi_1 \wedge \varphi_2$, $\varphi = \varphi_1 \vee \varphi_2$, $\varphi = \varphi_1 \to \varphi_2$ 

[^обозначение]: Мы обозначили пропозициональную переменную буквой $q$, поскольку $p$ уже занята в обозначении подстановки $\varphi[\psi/p]$.

*База индукции.* Пусть $\varphi=q$. Возможно два случая: (1) $q=p$ или (2) $q \not = p$.

1. Нам нужно доказать, что $\vdash p[\psi/p] \leftrightarrow p[\psi'/p]$. Заметим, что это утверждение, в силу определения подстановки, эквивалентно следующему $\vdash \psi \leftrightarrow \psi'$ (верно по допущению). 

2. Нам нужно доказать, что $\vdash q [\psi/p] \leftrightarrow q [\psi'/p]$. 
Заметим, что это утверждение, в силу определения подстановки, эквивалентно следующему
$\vdash q \leftrightarrow q$ (см.: пример с доказательством $\vdash_{cl_{\to\neg}}p \to p$)

*Шаг индукции.*

Предположение индукции: $\vdash \varphi_1[\psi/p] \leftrightarrow \varphi_1[\psi'/p]$ и $\vdash \varphi_2[\psi/p] \leftrightarrow \varphi_2[\psi'/p]$.

Сл. 1. $\varphi= \neg \varphi_1$. По предположению индукции $\vdash \varphi_1[\psi/p] \leftrightarrow \varphi_1[\psi'/p]$. По предшествующему этому доказательству утверждению отсюда получаем $\vdash \neg \varphi_1[\psi/p] \leftrightarrow \neg \varphi_1[\psi'/p]$

Сл.2. $\varphi= \varphi_1 \wedge \varphi_2$. 

<--
\begin{prooftree}
\infer0[IH]{\vdash \varphi_1[\psi/p] \leftrightarrow \varphi_1[\psi'/p]} 
\infer0[IH]{\vdash \varphi_2[\psi/p] \leftrightarrow \varphi_2[\psi'/p]}
\infer2[утв.\ref{equiv}]{\vdash (\varphi_1[\psi/p] \wedge \varphi_2 [\psi/p]) \leftrightarrow (\varphi_1[\psi'/p] \wedge \varphi_2 [\psi'/p])}
\infer1[опр.\ref{dfn:subst}]{\vdash (\varphi_1 \wedge \varphi_2)[\psi/p] \leftrightarrow (\varphi_1 \wedge \varphi_2)[\psi'/p]}
\end{prooftree}
-->	
Сл.3. $\varphi= \varphi_1 \vee \varphi_2$. Аналогично сл.2. Упражнение. 

Сл. 4. $\varphi= \varphi_1 \to \varphi_2$. Аналогично сл.2. Упражнение.


**Утверждение.** Следующее правило вывода является производным в исчислении $cl$:

$$\frac{\Gamma \vdash \varphi[\psi/p]} \hypo{\vdash \psi \leftrightarrow \psi'}{\Gamma \vdash \varphi[\psi'/p]} RE$$

**Доказательство.** Упражнение.


### Другие варианты исчисления для традиционного набора связок

**Упражнение.** Докажите следующую теорему:

$$\vdash_{cl} p \vee (p \to q)$$

**Упражнение\*.** Докажите, что если аксиомную схему $N2$ заменить на одну из следующих:

* $A \vee \neg A$
* $((A \to B) \to A) \to A$,

то получится исчисление, которое дедуктивно эквивалентно $cl$.

## Позитивный и импликативный фрагмент

### Позитивный фрагмент

Заметим, что некоторые тавтологии не содержат отрицание. Например, $(p \wedge q) \vee (q \wedge p)$ или $(p \to q) \vee (q \to p)$. Достаточно ли будет взять только аксиомы без отрицания из исчисления $cl$? Оказывается, что нет. Нужно будет добавить еще одну аксиомную схему, связывающую импликацию и дизъюнкцию.

**Определение.** Исчисление $cl_+$ получается заменой аксиомных схем $N_1$ и $N_2$ на следующую: 

($D4$) $A \vee (A \to B)$

Правило вывода: modus ponens 

**Вопрос.** В чем интуитивный смысл формулы $A \vee (A \to B)$? 

**Вопрос.** Справедлива ли для исчисления $cl_\to$ теорема о дедукции?

**Упражнение.** Докажите следующую теорему:

$$\vdash_{cl_+} ((p \to q) \to p) \to p$$

**Упражнение\*.** Известно, что отрицание можно выразить через $\to$ и $\bot$. Что нужно добавить к позитивному исчислению, чтобы получилось полное и корректное исчисление в языке $\wedge, \vee, \to, \bot$?

### Позитивный фрагмент с константой $\bot$

**Определение.** Исчисление $cl_{+\bot}$ получается добавление к исчислению $cl_+$ следующей аксиомной схемы:

$$\bot \to A$$

**Упражнение.** Докажите в исчислении $cl_{+\bot}$ следующие теоремы:

1. $A \vee (A \to \bot)$
2. $((A \to \bot) \to \bot) \to A$

### Импликативный фрагмент

Заметим, что некоторые тавтологии состоят включают в себя только импликацию. Например $p \to p$ или $p \to ((p \to q) \to q)$. Достаточно ли будет аксиомных схем $I_1$ и $I_2$, чтоб вывести все такие тавтологии? Оказывается, что нет. Но, если добавить в исчисление закон Пирса, то такой набор аксиом оказывается достаточным.

**Определение.** Исчисление $cl_\to$
Аксиомные схемы: 

($I_1$) $A \to (B \to A)$

($I_2$) $(A \to (B \to C)) \to ((A \to B) \to (A \to C))$	

($I_3$) $((A \to B) \to A) \to A$ (закон Пирса)

Правило вывода: modus ponens 	

**Вопрос.** Справедлива ли для исчисления $cl_\to$ теорема о дедукции?

**Вопрос\*.** В чем интуитивный смысл закона Пирса?

**Упражнение.** Докажите следующую теорему:

$$\vdash_{cl_\to} ((p \to q) \to r) \to ( (p \to r) \to r)$$

**Вопрос\*.** Можно ли в каком-либо из рассмотренных нами исчислений заменить правило modus ponens на аксиомную схему $A \to ((A\to B) \to B)$. Разве эта аксиомная схема не выражает ту же идею, что и modus ponens?

## Сравнение логических систем

**Определение.** Правилом подстановки будем называть следующее правило вывода:

$$\frac{A}{A[B/p]}$$



**Определение.** Логикой будем называть множество формул, замкнутых по правилу modus ponens и по подстановке.

**Утверждение.** Множество теорем является логикой.

**Определение.** Консервативное расширение

Пусть $\mathcal{L}_1$ и $\mathcal{L}_2$ – пропозициональные языки такие, что $\mathcal{L}_1 \subseteq \mathcal{L}_2$, а $L_1 \subset \mathcal{L}_1$ и $L_2 \subset \mathcal{L}_2$ – логики. Если $L_1 = L_2 \cap \mathcal{L}_1$, то будем называть $L_2$ консервативным расширением $L_1$, а $L_1$ $\mathcal{L}_1$-фрагментом логики $L_2$.

**Утверждение.** Пусть $cl:=\{  \varphi \in Fm \mid \vdash_{cl} \varphi \}$, 
$cl_{\to\neg}:=\{  \varphi \in Fm_{\to\neg} \mid \vdash_{cl_{\to\neg}} \varphi \}$

1. Логика $cl$ является консервативным расширением логики 
	$cl_{\to\neg}$.
2. Логика $cl_{\to\neg}$ является $Fm_{\to\neg}$–фрагментом логики $cl$.

**Определение.** Пусть $\*: \mathcal{L}_1 \to \mathcal{L}_2$, $\bigstar :  \mathcal{L}_2 \to \mathcal{L}_1$, $L_1$ – логика в языке $\mathcal{L}_1$, $L_2$ – логика в языке $\mathcal{L}_2$, будем говорить, что логики $L_1$ и $L_2$ дефинициально эквивалентны, если

1. $\varphi \in L_1 \Leftrightarrow (\varphi)^\* \in L_2 $
2. $\varphi \in L_2 \Leftrightarrow (\varphi)^\bigstar \in L_2 $
3. $\varphi \leftrightarrow ((\varphi)^{\*})^{\bigstar} \in L_1$
4. $\varphi \leftrightarrow ((\varphi)^{\bigstar})^{\*} \in L_2$

**Утверждение.** Логики $cl$ и $cl_{+\bot}$ дефинициально эквивалентны.

**Определение.** Исчисление $cl_{\to\bot}$ получается заменой аксиомных схем, содержащих отрицание, на следуюущую аксиомную схему:
$((A \to \bot) \to \bot) \to A$

**Утверждение.** Логики $cl_{\to\bot}$ и $cl_{\to\neg}$ дефинициально эквивалентны.

